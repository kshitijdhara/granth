// Global styles for Granth frontend
// CSS reset, normalization, and base styles

:root {
  --color-background-primary: #ffffff;
  --color-background-secondary: #f8f9fa;
  --color-surface-primary: rgba(255, 255, 255, 0.8);
  --color-surface-secondary: rgba(255, 255, 255, 0.6);
  --color-text-primary: #1d1d1f;
  --color-text-secondary: #86868b;
  --color-text-tertiary: #a1a1a6;
  --color-accent-primary: #007aff;
  --color-accent-secondary: #5856d6;
  --color-success: #34c759;
  --color-warning: #ff9500;
  --color-error: #ff3b30;
  --color-border-light: rgba(0, 0, 0, 0.1);
  --color-border-medium: rgba(0, 0, 0, 0.2);

    /* RGB tokens for rgba() usages */
    --color-accent-primary-rgb: 0, 122, 255; /* #007aff */
    --color-accent-secondary-rgb: 88, 86, 214; /* #5856d6 */
    --color-success-rgb: 52, 199, 89; /* #34c759 */
    --color-warning-rgb: 255, 149, 0; /* #ff9500 */
    --color-error-rgb: 255, 59, 48; /* #ff3b30 */

    /* Let browsers paint form controls appropriately */
    color-scheme: light;

  --font-family-system: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'SF Pro Text', 'Helvetica Neue', Helvetica, Arial, sans-serif;
  --font-weight-regular: 400;
  --font-weight-medium: 500;
  --font-weight-semibold: 600;
  --font-weight-bold: 700;

  --border-radius-small: 4px;
  --border-radius-medium: 8px;
  --border-radius-large: 12px;
  --border-radius-xlarge: 16px;
  --border-radius-xxlarge: 24px;

  --shadow-small: 0 1px 2px rgba(0, 0, 0, 0.1);
  --shadow-medium: 0 2px 8px rgba(0, 0, 0, 0.1);
  --shadow-large: 0 4px 16px rgba(0, 0, 0, 0.1);
  --shadow-xlarge: 0 8px 32px rgba(0, 0, 0, 0.12);

  --blur-small: blur(8px);
  --blur-medium: blur(16px);
  --blur-large: blur(24px);

  --opacity-disabled: 0.5;
  --opacity-hover: 0.8;
  --opacity-focus: 0.9;
  --spacing-xs: 0.25rem;
  --spacing-sm: 0.5rem;
  --spacing-md: 0.75rem;
  --spacing-lg: 1rem;
  --spacing-xl: 1.5rem;
  --spacing-xxl: 2rem;
  --spacing-xxxl: 3rem;

  --motion-duration-fast: 150ms;
  --motion-duration-medium: 250ms;
  --motion-duration-slow: 350ms;
  --motion-easing-standard: cubic-bezier(0.25, 0.46, 0.45, 0.94);
  --motion-easing-accelerate: cubic-bezier(0.55, 0, 1, 0.45);
  --motion-easing-decelerate: cubic-bezier(0.21, 0, 0.35, 1);
}

// Dark mode media query
@media (prefers-color-scheme: dark) {
  :root {
    --color-background-primary: #1d1d1f;
    --color-background-secondary: #2c2c2e;
    --color-surface-primary: rgba(28, 28, 30, 0.8);
    --color-surface-secondary: rgba(28, 28, 30, 0.6);
    --color-text-primary: #f2f2f7;
    --color-text-secondary: #8e8e93;
    --color-text-tertiary: #a1a1a6;
    --color-accent-primary: #007aff;
    --color-accent-secondary: #5856d6;
    --color-success: #34c759;
    --color-warning: #ff9500;
    --color-error: #ff3b30;
    --color-border-light: rgba(255, 255, 255, 0.1);
    --color-border-medium: rgba(255, 255, 255, 0.2);

    /* RGB tokens for rgba() usages */
    --color-accent-primary-rgb: 0, 122, 255; /* #007aff */
    --color-accent-secondary-rgb: 88, 86, 214; /* #5856d6 */
    --color-success-rgb: 52, 199, 89; /* #34c759 */
    --color-warning-rgb: 255, 149, 0; /* #ff9500 */
    --color-error-rgb: 255, 59, 48; /* #ff3b30 */

    color-scheme: dark;
  }
}

/* Explicit class-based theme overrides to allow runtime toggling */
.theme-light {
  color-scheme: light;
  --color-background-primary: #ffffff;
  --color-background-secondary: #f8f9fa;
  --color-surface-primary: rgba(255, 255, 255, 0.8);
  --color-surface-secondary: rgba(255, 255, 255, 0.6);
  --color-text-primary: #1d1d1f;
  --color-text-secondary: #86868b;
  --color-border-light: rgba(0, 0, 0, 0.1);
  --color-border-medium: rgba(0, 0, 0, 0.2);
}

.theme-dark {
  color-scheme: dark;
  --color-background-primary: #1d1d1f;
  --color-background-secondary: #2c2c2e;
  --color-surface-primary: rgba(28, 28, 30, 0.8);
  --color-surface-secondary: rgba(28, 28, 30, 0.6);
  --color-text-primary: #f2f2f7;
  --color-text-secondary: #8e8e93;
  --color-border-light: rgba(255, 255, 255, 0.1);
  --color-border-medium: rgba(255, 255, 255, 0.2);
}

*,
*::before,
*::after {
  box-sizing: border-box;
}

html {
  line-height: 1.15;
  -webkit-text-size-adjust: 100%;
}

body {
  margin: 0;
  font-family: var(--font-family-system);
  font-weight: var(--font-weight-regular);
  font-size: 16px;
  line-height: 1.5;
  color: var(--color-text-primary);
  background-color: var(--color-background-primary);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

// Global typography defaults
h1, h2, h3, h4, h5, h6 {
  margin: 0;
  font-weight: var(--font-weight-semibold);
  line-height: 1.2;
}

h1 {
  font-size: 2rem;
}

h2 {
  font-size: 1.5rem;
}

h3 {
  font-size: 1.25rem;
}

p {
  margin: 0;
}

a {
  color: var(--color-accent-primary);
  text-decoration: none;
  transition: color var(--motion-duration-fast) var(--motion-easing-standard);
}

a:hover {
  color: var(--color-accent-secondary);
}

// Focus styles
*:focus {
  outline: 2px solid var(--color-accent-primary);
  outline-offset: 2px;
}

*:focus:not(:focus-visible) {
  outline: none;
}

*:focus-visible {
  outline: 2px solid var(--color-accent-primary);
  outline-offset: 2px;
}

// Button reset
button {
  font-family: inherit;
  font-size: inherit;
  line-height: inherit;
  margin: 0;
  border: none;
  background: none;
  cursor: pointer;
}

// Input reset
input, textarea, select {
  font-family: inherit;
  font-size: inherit;
  line-height: inherit;
  margin: 0;
}

// Motion guidelines
* {
  transition: background-color var(--motion-duration-medium) var(--motion-easing-standard),
              border-color var(--motion-duration-medium) var(--motion-easing-standard),
              color var(--motion-duration-medium) var(--motion-easing-standard),
              opacity var(--motion-duration-medium) var(--motion-easing-standard),
              transform var(--motion-duration-medium) var(--motion-easing-standard);
}

// App layout
.app {
  min-height: 100vh;

  &__main {
    transition: margin-left var(--motion-duration-medium) var(--motion-easing-standard);
    padding: var(--spacing-xl);

    &--sidebar-open {
      margin-left: 250px;
    }

    &--sidebar-closed {
      margin-left: 60px;
    }
  }
}